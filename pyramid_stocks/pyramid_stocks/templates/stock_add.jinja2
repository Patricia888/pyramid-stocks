{% extends "index.jinja2" %}

{% block content %}

    <h1>Add a Stock to Your Portfolio:</h1>
    <p>Search for a stock by ticker symbol to add to your portfolio</p>
    
    <form id="add-form" method="GET" action="{{request.route_url('stock')}}">
    <label for="ticker">Stock Ticker</label>
    <input type="text" name="ticker" placeholder="MSFT" required>
    <button type="submit">Search</button>
    </form>

    {% if company %}
    <div>
    <h3>Result:</h3>
    <p>Symbol: {{company.symbol}}<br>
    Company Name: {{company.companyName}}<br>
    Exchange: {{company.exchange}}<br>
    Industry: {{company.industry}}<br>
    Website: {{company.website}}<br>
    Description: {{company.description}}<br>
    CEO: {{company.CEO}}<br>
    Issue Type: {{company.issueType}}<br>
    Sector: {{company.sector}}</p>
    </div>

    <form id="add-form" method="POST" action="{{request.route_url('stock')}}">
    <input type="hidden" name="csrf_token" value="{{request.session.get_csrf_token()}}">
    <input type="hidden" name="symbol" value="{{company.symbol}}">
    <input type="hidden" name="companyName" value="{{company.companyName}}">
    <input type="hidden" name="exchange" value="{{company.exchange}}">
    <input type="hidden" name="industry" value="{{company.industry}}">
    <input type="hidden" name="website" value="{{company.website}}">
    <input type="hidden" name="description" value="{{company.description}}">
    <input type="hidden" name="CEO" value="{{company.CEO}}">
    <input type="hidden" name="issueType" value="{{company.issueType}}">
    <input type="hidden" name="sector" value="{{company.sector}}">
    <button type="submit">Add to Portfolio</button>
    </form>

    {% endif%}

    {% if err %}
    <h3>Result:</h3>
    <p>{{err}}</p>
    {% endif%}

{% endblock content %}
